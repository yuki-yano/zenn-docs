---
title: "TypeScriptã§Vimã®ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã‚’å®Ÿè£…ã—ã¦é–‹ç™ºä½“é¨“ãŒæœ€é«˜ã«ãªã£ã¦ã„ã‚‹è©±"
emoji: "ğŸ”"
type: "tech"
topics: ["Vim", "neovim", "fzf", "TypeScript"]
published: true
---

:::message
ã“ã®è¨˜äº‹ã¯[Vim Advent Calendar 2020](https://qiita.com/advent-calendar/2020/vim)ã®24æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚
:::

## ã¯ã˜ã‚ã«

ã“ã®è¨˜äº‹ã¯è‡ªåˆ†ãŒé–‹ç™ºã—ã¦ã„ã‚‹TypeScriptè£½Vimãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€[fzf-preview.vim](https://github.com/yuki-ycino/fzf-preview.vim)ã«ã¤ã„ã¦ã®è¨˜äº‹ã¨ãªã£ã¦ã„ã¾ã™ã€‚
ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ã«ã¤ã„ã¦æ›¸ã„ã¦ã„ã¾ã™ã€‚

- è‡ªåˆ†ã®ã‚¨ãƒ‡ã‚£ã‚¿(Vim)ã¨ã®ä»˜ãåˆã„æ–¹
- ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã‚’ç”¨ã„ãŸé–‹ç™ºä½“é¨“ãƒ»é–‹ç™ºãƒ•ãƒ­ãƒ¼
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ©Ÿèƒ½
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å°å…¥ãªã©

è‰²ã€…ã¨æ›¸ã„ã¦ã„ãŸã‚‰çµæ§‹ãªé‡ã«ãªã£ã¦ã—ã¾ã£ãŸã®ã§ã€å‹•ä½œã‚’è¦‹ãŸã„å ´åˆã¯[fzf-preview.vimã‚’ãƒ¡ã‚¤ãƒ³ä½¿ã£ãŸä½œæ¥­ãƒ•ãƒ­ãƒ¼](#fzf-preview.vimã‚’ãƒ¡ã‚¤ãƒ³ä½¿ã£ãŸä½œæ¥­ãƒ•ãƒ­ãƒ¼)ã‚„[Gitã¨ã®å¼·åŠ›ãªé€£æº](#gitã¨ã®å¼·åŠ›ãªé€£æº)ã‚ãŸã‚Šã¾ã§é£›ã¶ã¨ã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

## ç§ã®é–‹ç™ºç’°å¢ƒã¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™º

è‡ªåˆ†ã¯åŸºæœ¬çš„ã«Webã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦æ´»å‹•ã—ã¦ãŠã‚Šã€æœ€è¿‘ã¯TypeScript(React)ã§ã®é–‹ç™ºãŒãƒ¡ã‚¤ãƒ³ã€ãŸã¾ã«Ruby(Rails)ã‚’æ›¸ã„ãŸã‚Šã—ã¦ã„ã¾ã™ã€‚
è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«é€šã‚Šã‚¨ãƒ‡ã‚£ã‚¿ã¯ã»ã¼Vim(å³å¯†ã«ã¯Neovim)ã‚’ä½¿ã£ã¦ãŠã‚Šã€ç¾ä»£ã®ãƒ¡ã‚¤ãƒ³ã‚¹ãƒˆãƒªãƒ¼ãƒ ã§ã‚ã‚‹VSCodeã¯è»½ãã—ã‹è§¦ã‚Œã‚‰ã‚Œã¦ã„ã¾ã›ã‚“ã€‚

VSCodeã¯ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã‚’å«ã‚ã¦éå¸¸ã«å„ªã‚ŒãŸã‚¨ãƒ‡ã‚£ã‚¿ã ã¨æ€ã£ã¦ã„ã¾ã™ãŒã€Vimã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚‚æ´»ç™ºãªãƒ¦ãƒ¼ã‚¶ãŒå¤šãéå¸¸ã«è‰¯ã„ç’°å¢ƒã§ã€ãšã£ã¨Vimã‚’ä½¿ã„ç¶šã‘ã¦ã„ã¾ã™ã€‚
ãã—ã¦ã€ç¾ä»£ã§ã¯LSPã®ç™ºå±•ãŒç›®è¦šã¾ã—ãã€Vimã§ã‚‚LSPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½¿ã†ã“ã¨ã§VSCodeã«è¿‘ã„é–‹ç™ºä½“é¨“ã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ãã¦ã„ã¾ã™ã€‚
ç‰¹ã«TypeScriptã®é–‹ç™ºã«ã¤ã„ã¦ã¯VSCodeã«å‰²ã¨è¿‘ã„ã“ã¨ãŒã§ãã¦ã„ã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚

æœ€è¿‘ã¯è£œå®Œã‚„ã‚¸ãƒ£ãƒ³ãƒ—ã¯ã‚‚ã¡ã‚ã‚“ã€Code Actionã‚’å®Ÿè¡Œã™ã‚‹UIã‚‚ãƒªãƒƒãƒã«ãªã£ã¦ã„ã¦ã³ã£ãã‚Šã—ã¾ã—ãŸã€‚

:::message
ã“ã‚Œã¯Vimã®æ¨™æº–æ©Ÿèƒ½ã§ã¯ãªã[coc.nvim](https://github.com/neoclide/coc.nvim)ã®æ©Ÿèƒ½ã§ã™ã€‚
:::
@[tweet](https://twitter.com/yuki_ycino/status/1330869140211474433)

ãªãŠã€ç¾åœ¨ã®è‡ªåˆ†ã®vimrcã¯3505è¡Œ(ã‚³ãƒ¡ãƒ³ãƒˆ + ç©ºè¡ŒãŒç´„500è¡Œ)ãƒ»å°å…¥ã—ã¦ã„ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ•°ã¯111å€‹ã«ãªã£ã¦ãŠã‚Šã€ã‚ã‚‹ç¨‹åº¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã®ãŒå‰æã«ãªã£ã¦ã„ã‚‹ã®ã§1ã‹ã‚‰é–‹ç™ºç’°å¢ƒã‚’æ•´ãˆã‚‹ã«ã¯VSCodeã‚’ä½¿ã†ã®ãŒç„¡é›£ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“â€¦
ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸVimã¯éå¸¸ã«å¿«é©ã§ã™ãŒã¨ã¦ã‚‚æ·±ã„æ²¼ã§ã™ã€‚

https://github.com/yukiycino-dotfiles/dotfiles

ãã—ã¦ã€ä»Šå¹´ã®Vimæ´»ã¨ã—ã¦[TypeScriptã§Vimãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®é–‹ç™ºã«æŒ‘æˆ¦](#é–‹ç™ºã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³)ã—ã¾ã—ãŸã€‚ãã®çµæœã‹ãªã‚Šç†æƒ³ã«è¿‘ã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½œã‚‹ã“ã¨ãŒã§ããŸãŸã‚Vimã§ã®é–‹ç™ºãŒå¿«é©ã«ãªã‚Šã€æ›´ã«Vimã«ãƒ­ãƒƒã‚¯ã‚¤ãƒ³ã•ã‚Œã‚‹ã¨ã„ã†çŠ¶æ…‹ã«ãªã£ã¦ã„ã¾ã™ã€‚
ãã®é–‹ç™ºã—ã¦ã„ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒ[fzf-preview.vim](https://github.com/yuki-ycino/fzf-preview.vim)ã§ã™ã€‚
(ãƒ—ãƒ©ã‚°ã‚¤ãƒ³åãŒå¾®å¦™ãªã®ã¯é–‹ç™ºé–‹å§‹å½“æ™‚ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ãŒå¯¾å¿œã—ã¦ã„ãªã‹ã£ãŸfzf.vimã®æ©Ÿèƒ½ã«å¯¾ã—ã¦æ‹¡å¼µã—ãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã ã£ãŸã‹ã‚‰ã§ã€çµæœçš„ã«æƒ³å®šã‚ˆã‚Šé™ã‹ã«å¤§ãããªã£ã¦ã—ã¾ã„ã¾ã—ãŸâ€¦)

ãªãŠã€Vim scriptã‚’ã‚ã¾ã‚Šæ›¸ã‹ãšTypeScriptã§ã®é–‹ç™ºã«åã£ã¦ã„ã£ãŸãŸã‚ã€Vimmerã¨ã—ã¦ã¯ä¸­ç´šè€…ç¨‹åº¦ã‹ãªã¨æ€ã£ã¦ã„ã¾ã™â€¦

## ãƒ¢ãƒ€ãƒ³é–‹ç™ºç’°å¢ƒã¨ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã€ãã—ã¦Vim

### ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã¨ã¯

çŸ¥ã£ã¦ã„ã‚‹æ–¹ã‚‚å¤šã„ã‹ã¨ã¯æ€ã„ã¾ã™ãŒã€ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

ãƒªã‚½ãƒ¼ã‚¹(æ¤œç´¢å¯¾è±¡)ã¨ãªã‚‹ãƒªã‚¹ãƒˆã‚’å—ã‘å–ã‚Šã€ã‚ã„ã¾ã„æ¤œç´¢ã—ã¦å€™è£œã‚’é¸æŠã€ãã®å¾Œä½•ã‚‰ã‹ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ã“ã¨ã‚’ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã¨å‘¼ã³ã¾ã™ã€‚
æ­£ç¢ºãªåå‰ã‚„æ­£è¦è¡¨ç¾ãŒä¸è¦ã§ã€é«˜é€Ÿã«å¯¾è±¡ã‚’çµã‚Šè¾¼ã‚ã‚‹ã®ãŒãƒ¡ãƒªãƒƒãƒˆã§ã™ã€‚
ä»£è¡¨çš„ãªCLIã§ã¯[fzf](https://github.com/junegunn/fzf)ãŒã‚ã‚Šã¾ã™ã€‚

ã‚¨ãƒ‡ã‚£ã‚¿ä¸Šã§å®Ÿè¡Œã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆå…¨ä½“ã‹ã‚‰å¯¾è±¡ã‚’é«˜é€Ÿã«æ¤œç´¢ã—ãŸã‚Šã€grepçµæœã‚’ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã«çµã‚Šè¾¼ã‚“ã§ã‚¸ãƒ£ãƒ³ãƒ—ã™ã‚‹ã¨ã„ã£ãŸæ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚

### ã‚¨ãƒ‡ã‚£ã‚¿ã¨ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼

ç¾ä»£ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã«ãŠã„ã¦ã‚³ãƒ¼ãƒ‰ã®å®Ÿè£…ã‚„ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®éš›ã«ä½•ã‚‰ã‹ã®ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã‚’ç”¨ã„ã‚‹ã®ã¯åŠã°å¸¸è­˜çš„ã«ãªã£ã¦ãã¦ã„ã¾ã™ã€‚
åˆ†ã‹ã‚Šã‚„ã™ã„ã‚‚ã®ã ã¨ã€VSCodeã§ã„ã† `Ctrl+p` (Macã§ã¯ `Command+p` )ã®ã‚ˆã†ãªæ©Ÿèƒ½ã§ã™ã€‚

è¿‘å¹´ã¯å¤§åŠã®ã‚¨ãƒ‡ã‚£ã‚¿ã«ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ãŒå®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€ç‰¹ã«æœ€è¿‘ã®Vimã‚’å–ã‚Šå·»ãç’°å¢ƒã§ã¯ä½•æ•…ã‹ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒä¹±ç«‹ã—ã¦ã„ã¾ã™ã€‚
(è‡ªåˆ†ã¯æ£šã«ä¸Šã’ã¦ã€æ—¢å­˜ã®ã‚’ä½¿ãˆã°ã„ã„ã‚“ã˜ã‚ƒãªã„ã‹ã¨ã„ã†æ°—æŒã¡ã¯ã‚ã‚Šã¾ã™ãŒ)ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ãŒã‚¨ãƒ‡ã‚£ã‚¿ã®æ©Ÿèƒ½ã¨ã—ã¦é‡è¦è¦–ã•ã‚Œã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚

ã“ã®è¨˜äº‹ã§è§£èª¬ã—ã¦ã„ã‚‹[yuki-ycino/fzf-preview.vim](https://github.com/yuki-ycino/fzf-preview.vim)ã¯ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ç³»ã®ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã€å¾ã€…ã«ãƒ¦ãƒ¼ã‚¶ãŒå¢—ãˆã¦2020å¹´12æœˆæ™‚ç‚¹ã§ã‚¹ã‚¿ãƒ¼ã‚’470ç¨‹åº¦ä»˜ã‘ã¦è²°ãˆã¦ã„ã¾ã™ã€‚
ãƒ¦ãƒ¼ã‚¶ãŒå¢—ãˆã¦ã„ã‚‹ç†ç”±ã¨ã—ã¦ã€ç‰¹ã«æµ·å¤–ã§ã¯ã‚ªãƒ¼ãƒ«ã‚¤ãƒ³ãƒ¯ãƒ³ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒå¥½ã¾ã‚Œã‚‹å‚¾å‘ã«ã‚ã‚‹ã®ã§ã€ãã†ã„ã£ãŸã‚‚ã®ã‚‚å½±éŸ¿ã—ã¦ã„ã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚

æœ‰åãªãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã®å®¢è¦³çš„ãªæ¯”è¼ƒã¯ [@yutakatay](https://zenn.dev/yutakatay) ã•ã‚“ã®è¨˜äº‹ã«ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚
è‡ªåˆ†ãŒã‚ã¾ã‚Šæ¯”è¼ƒã—ãŸã“ã¨ã®ãªã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã¤ã„ã¦ã‚‚æ•´ç†ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€èˆˆå‘³ãŒã‚ã‚‹æ–¹ã¯ä¸€èª­ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚

https://zenn.dev/yutakatay/articles/vim-fuzzy-finder

## fzf-preview.vimã«ã‚ˆã‚‹æœ€é«˜ã®é–‹ç™ºä½“é¨“

è‡ªåˆ†ã®é–‹ç™ºç’°å¢ƒã¯å¤§åŠãŒfzf-preview.vimã«ä¾å­˜ã—ã¦ã„ã¾ã™ã€‚è‡ªåˆ†ã«ã¨ã£ã¦æœ€é«˜ã®Vimãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®1ã¤ã§ã™ã€‚
æ©Ÿèƒ½ã¨ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ“ä½œã‚’ä¸€æ‰‹ã§è¡Œã†äº‹ãŒã§ãã¾ã™ã€‚
ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‹ã‚‰ãã‚Œãã‚Œã‚³ãƒãƒ³ãƒ‰ã‚’æä¾›ã—ã¦ã„ã¦ã€è‡ªåˆ†ã¯ `prefix + {key}` ã§èµ·å‹•ã™ã‚‹ã‚ˆã†ã«mapã—ã¦ã„ã¾ã™ã€‚

- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢
- æœ€è¿‘é–‹ã„ãŸ(or ä¿å­˜ã—ãŸ)ãƒ•ã‚¡ã‚¤ãƒ«ã®é¸æŠ
- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªgrepã¨å¯¾è±¡è¡Œã¸ã®ã‚¸ãƒ£ãƒ³ãƒ—
- ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã¸ã®ã‚¸ãƒ£ãƒ³ãƒ—
- LSPã‚’ä½¿ã£ã¦ã®å®šç¾©ãƒ»å‚ç…§ã¸ã®ã‚¸ãƒ£ãƒ³ãƒ—
- Gitã¨ã®å¼·åŠ›ãªé€£æº

ä¸Šè¨˜ã‚’ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã§é–‹ãã€ã‚«ãƒ¼ã‚½ãƒ«ãŒåˆã£ã¦ã„ã‚‹è¦ç´ ã‚’**ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**ä»˜ãã§è¡¨ç¤ºã—ã¾ã™ã€‚
ã“ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ãŒå€‹äººçš„ã«ã¯éå¸¸ã«é‡è¦ã§ã™ã€‚

:::message
ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯ã‚«ãƒ¼ã‚½ãƒ«ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’è¡¨ç¤ºã—ã€grepãªã©ã®è¡Œã‚’æ‰±ã†ã‚‚ã®ã§ã‚ã‚Œã°ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®å¯¾è±¡è¡Œã®å‰å¾Œã‹ã‚‰è¡¨ç¤ºã—ã¾ã™ã€‚
ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ãã‚‹ã®ã§ã€è©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­ã‚’ä¸€é€šã‚Šè¦‹é€šã—ã¦ã‹ã‚‰é¸æŠã‚’ã™ã‚‹ã“ã¨ãªã©ãŒå¯èƒ½ã§ã™ã€‚
ã¾ãŸã€Gitæ“ä½œã§ã¯commit logã‚„diffãªã©ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚
:::

ã¤ã¾ã‚Šã€é–‹ç™ºã«ãŠã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ãŸã‚Šæ¤œç´¢ã™ã‚‹æ©Ÿèƒ½ã‚’ç¶²ç¾…ã—ã¦ã„ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã€å…±é€šã®UIã§ãã‚Œã‚‰ã‚’æ‰±ã†ãŸã‚æ§˜ã€…ãªæ“ä½œã®èµ·ç‚¹ã¨ãªã£ã¦ã„ã¾ã™ã€‚

QuickFixã¸ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚„QuickFixã‚’ãƒªã‚½ãƒ¼ã‚¹ã¨ã—ã¦æ‰±ã†æ©Ÿèƒ½ã‚‚å®Ÿè£…ã—ã¦ãŠã‚Šã€ä»–ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã®é€£æºã‚‚å¯èƒ½ã§ã™ã€‚
å¾Œè¿°ã®[ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ä½œæ¥­ãƒ•ãƒ­ãƒ¼](#ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°)ã«ã‚ã‚Šã¾ã™ãŒã€[vim-qfreplace](https://github.com/thinca/vim-qfreplace)ã¨ã®é€£æºã‚‚ãã®1ã¤ã§ã™ã€‚
ã¾ãŸã€[gitã®æ§˜ã€…ãªæ“ä½œ](#gitã¨ã®å¼·åŠ›ãªé€£æº)ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

ä»¥ä¸‹ãŒgrepã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ä¾‹ã§ã€å·¦å´ã§é¸æŠã—ã¦ã„ã‚‹è¡Œã®å‘¨è¾ºãŒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ã—ã¦å³ã®ãƒ–ãƒ­ãƒƒã‚¯ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚
ãã®æ¬¡ã®ç”»åƒã§ã¯commitã®diffã‚’è¡¨ç¤ºã—ã¤ã¤git logã‚’æ“ä½œã—ã¦ã„ã¾ã™ã€‚ã“ã®ç”»é¢ã‹ã‚‰logã«å¯¾ã—ã¦æ§˜ã€…ãªæ“ä½œãŒå¯èƒ½ã§ã™ã€‚
![grep](https://user-images.githubusercontent.com/5423775/102711979-0d2ccc00-4301-11eb-928b-3471377dde78.png)
*grep with preview*
![git_log](https://user-images.githubusercontent.com/5423775/102713902-a9110480-430e-11eb-9501-7b14bc1bfb1e.png)
*git log with diff preview*

## ä»–ã®ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã¨æ¯”è¼ƒã—ã¦ã®å„ªä½ç‚¹ãªã©

### ã‚ˆã‚Šãƒªãƒƒãƒãªè¡¨ç¤ºã®ã‚µãƒãƒ¼ãƒˆ

Vimã®ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦ã¯æœ‰åãªã‚‚ã®ã«ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚

- [fzf.vim](https://github.com/junegunn/fzf.vim)
- [telescope.nvim](https://github.com/nvim-telescope/telescope.nvim)
- [denite.nvim](https://github.com/Shougo/denite.nvim)
- [ctrlp.vim](https://github.com/ctrlpvim/ctrlp.vim)

[fzf-preview.vim](https://github.com/yuki-ycino/fzf-preview.vim)ã¨ãã‚Œã‚‰(+ VSCode)ã‚’æ¯”è¼ƒã—ãŸã®ãŒä¸‹ã®ç”»åƒã§ã™ã€‚
fzf-preview.vimã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã®colorizeã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãªã©ã®æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ãŠã‚Šã€è¡¨ç¤ºã‚’ã¨ã¦ã‚‚ãƒªãƒƒãƒã«ã—ã¦ã„ã‚‹ã®ãŒä¼ã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚
ç‰¹ã«ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‹ã‚‰é¸æŠã™ã‚‹éš›ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ã€grepã‚„LSPé€£æºã®éš›ã«å¯¾è±¡ã¨ãªã£ã¦ã„ã‚‹è¡Œå‘¨è¾ºã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼(åŠã³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«)ã§ãã‚‹ã®ãŒé‡è¦ã§ã€è‡ªåˆ†ã¯ã“ã‚Œã«ã‚ˆã£ã¦é–‹ç™ºåŠ¹ç‡ãŒå¤§å¹…ã«ä¸ŠãŒã£ã¦ã„ã¾ã™ã€‚

:::message
ç”»åƒã¯å„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«colorizeã‚„deviconãªã©ã®å°è¦æ¨¡ãªè¨­å®šã‚’å…¥ã‚Œã¦æ¯”è¼ƒã—ã¦ã„ã¾ã™ã€‚
é«˜è§£åƒåº¦ãªã‚ªãƒªã‚¸ãƒŠãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒªãƒ³ã‚¯ã—ã¦ã„ã‚‹ã®ã§ã€ãƒ•ã‚©ãƒ³ãƒˆã®ç´°ã‹ã„éƒ¨åˆ†ãªã©ã¯ãƒªãƒ³ã‚¯å…ˆã§ç¢ºèªã—ã¦ã¿ã¦ãã ã•ã„ã€‚
:::

[![fuzzy_finder_list](https://user-images.githubusercontent.com/5423775/102991641-f97da180-455c-11eb-8555-cb108d391e39.png)](https://user-images.githubusercontent.com/5423775/102991641-f97da180-455c-11eb-8555-cb108d391e39.png)

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æä¾›ã—ã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ãŒè±Šå¯Œ

ãƒ•ã‚¡ã‚¤ãƒ«æ¤œç´¢ã§ã„ã†ã¨ã€fzf.vimã«ã¯ãªã„ã€æœ€è¿‘ä½¿ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚„æœ€è¿‘ä¿å­˜ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã®é †ã«å€™è£œã‚’å‡ºã™æ©Ÿèƒ½ãªã©ã‚‚æä¾›ã—ã¦ã„ã¾ã™ã€‚(Most Recent Used, Most Recent Written)
ã¾ãŸã€LSP(coc.nvim)ã¨ã®é€£æºã‚‚å®Ÿè£…ã—ã¦ãŠã‚Šã€Diagnosticsã‚„Referencesãªã©ã‚’æ‰±ã†ã“ã¨ãŒã§ãã¾ã™ã€‚
ä»–ã«ã‚‚Vimã®æ©Ÿèƒ½ã§ã‚ã‚‹mark, jumplist, tags, changelistãªã©ã¨ã€ä¸€éƒ¨ã®å¤–éƒ¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã®é€£æºã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚
(ä¸€éƒ¨fzf.vimã®ã¿ã§æä¾›ã•ã‚Œã¦ã„ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã‚‚ã‚ã‚Šã¾ã™ã€‚)

![lsp_diagnostics](https://user-images.githubusercontent.com/5423775/102711996-2df52180-4301-11eb-93b5-fb7a32e95128.png)
*LSP Diagnostics*

![lsp_references](https://user-images.githubusercontent.com/5423775/102711997-30577b80-4301-11eb-8a9a-c4a669c4801b.png)
*LSP References*

### ç´°ã‹ã„ä¾¿åˆ©ãªè¨­å®šãŒæ¨™æº–ã§ä»˜ã„ã¦ã„ã‚‹

fzf.vimã¨æ¯”è¼ƒã—ã¦ç©ºæ°—ã‚’èª­ã‚“ã æ„Ÿã˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚„è¨­å®šãŒæ¨™æº–ã§ä»˜ã„ã¦ã„ã¾ã™ã€‚å‰è¿°ã—ãŸdeviconã¨ã®é€£æºã‚‚ãã®1ã¤ã§ã™ã€‚
fzf.vimã ã¨ãã‚Œãªã‚Šã«è¨­å®šã‚’æ›¸ãå¿…è¦ãŒã‚ã‚‹éƒ¨åˆ†ã‚’çœç•¥ã§ãã‚‹æ„Ÿã˜ã§ã™ã€‚
ã“ã‚Œã¯ç´°ã‹ã„ã‚‚ã®ãŒå¤šã„ã®ã§èª¬æ˜ãŒé›£ã—ã„ã®ã§ã™ãŒã€fzf.vimã‚’ä½¿ã£ãŸä¸Šã§fzf-preview.vimã‚’ä½¿ã†ã¨åˆ†ã‹ã£ã¦ãã‚‹ã‹ãªã¨æ€ã„ã¾ã™ã€‚

### Gitã¨ã®å¼·åŠ›ãªé€£æº

ä¸€èˆ¬çš„ãªãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã®æ ã‹ã‚‰å¤–ã‚Œã‚‹æ©Ÿèƒ½ãªã®ã§ã™ãŒã€[gina.vim](https://github.com/lambdalisue/gina.vim), [vim-fugitive](https://github.com/tpope/vim-fugitive)ã¨é€£æºã™ã‚‹ã“ã¨ã§gitã®æ“ä½œãŒã§ãã¾ã™ã€‚
Interactive rebaseã¯Vimå†…ã§å®Œçµã™ã‚‹ã®ãŒé›£ã—ã„ã®ã§å®Ÿè£…ã—ã¦ã„ã¾ã›ã‚“ãŒã€ä»–ã®åŸºæœ¬çš„ãªæ“ä½œã¯ã»ã¼ç¶²ç¾…ã—ã¦ã„ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚
å…·ä½“çš„ã«ã¯status, add, reset, branch, checkout, merge, rebase, log, stash, reflog, commit, push, fetch, pullã‚ãŸã‚Šã®æ“ä½œã«ã¤ã„ã¦ãã‚Œãã‚Œã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¦‹ãªãŒã‚‰æ“ä½œã§ãã¾ã™ã€‚

ä»¥ä¸‹ãŒæ“ä½œä¾‹ã§ã™ã€‚

**git, status, add, commit, log**
@[youtube](l4khCeYgHT0)

**git branch, diff, checkout**
@[youtube](0cCd2NOmbaE)

### è‹¦æ‰‹ãªéƒ¨åˆ†

ä¸€æ–¹ã€fzf-preview.vimã¯ç´°ã‹ã„æŒ™å‹•ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãªã©ãŒæ¯”è¼ƒçš„è‹¦æ‰‹ã§ã™ã€‚
è©³ç´°ãªéƒ¨åˆ†ã¾ã§è©°ã‚ã¦è¨­å®šã—ãŸã„å ´åˆã¯ä»–ã®ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã®æ–¹ãŒå‘ã„ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

## fzf-preview.vimã‚’ãƒ¡ã‚¤ãƒ³ä½¿ã£ãŸä½œæ¥­ãƒ•ãƒ­ãƒ¼

### æ©Ÿèƒ½è¿½åŠ 

fzf-preview.vimã‚’ä½¿ã£ã¦å°è¦æ¨¡ãªæ©Ÿèƒ½è¿½åŠ (TypeScriptã®typeã«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å¢—ã‚„ã™)ã‚’å®Ÿéš›ã«è¡Œã£ãŸç°¡å˜ãªä¾‹ã§ã™ã€‚
![add_property_flow](https://user-images.githubusercontent.com/5423775/102732445-1740e000-437e-11eb-9495-b2f116cff005.png)
@[youtube](rKpbKKewUvM)

### ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

å‹•çš„è¨€èª(Vim script)ã§ã®é–¢æ•°åã‚’å¤‰æ›´ã—ãŸç°¡å˜ãªä¾‹ã§ã™ã€‚ç½®æ›ã«[vim-qfreplace](https://github.com/thinca/vim-qfreplace)ã¨ã„ã†ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½µç”¨ã—ã¦ã„ã¾ã™ã€‚
![refactor_flow](https://user-images.githubusercontent.com/5423775/102732457-1f991b00-437e-11eb-9a32-fa0c2b17c30a.png)
@[youtube](bd07x_gKCcw)

## é–‹ç™ºã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³

### é–‹ç™ºåˆæœŸ

ã“ã“ã‹ã‚‰ã¯å°‘ã—å†…éƒ¨ã®æŠ€è¡“çš„ãªè©±ã«å…¥ã£ã¦ã„ãã¾ã™ã€‚
fzf-preview.vimã¯ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’æä¾›ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ãŒã€å†…éƒ¨çš„ã«ã¯[fzf](https://github.com/junegunn/fzf)ã‚’ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã¨ã—ã¦ä½¿ã£ã¦ã„ã¾ã™ã€‚
fzfã‚’Vimä¸Šã§ä½¿ã†ãŸã‚ã®å…¬å¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®[fzf.vim](https://github.com/junegunn/fzf.vim)ã§ä¸ä¾¿ã«æ„Ÿã˜ã‚‹éƒ¨åˆ†ã®è§£æ¶ˆã¨ã€æ§˜ã€…ãªæ©Ÿèƒ½è¿½åŠ ã‚’ä¸»ã«è¡Œã£ã¦ã„ã¾ã™ã€‚

:::message
ã‚„ã‚„ã“ã—ã„ã®ã§ã™ãŒã€ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼è‡ªä½“ã®å®Ÿè£…ãŒfzfã€Vimç”¨ã®æ±ç”¨ã‚³ãƒãƒ³ãƒ‰ã‚’æä¾›ã—ã¦ã„ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒfzf.vimã§ã™ã€‚
ã¾ãŸã€(fzf.vimã§ãªã„)fzfã®ãƒªãƒã‚¸ãƒˆãƒªã«ã¯Vimã‹ã‚‰fzfã‚’æ“ä½œã™ã‚‹ãŸã‚ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°çš„ãªã‚‚ã®ãŒç½®ã‹ã‚Œã¦ã„ã¾ã™ã€‚
:::

fzf.vimã¯å„ªã‚ŒãŸãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãªã®ã§ã™ãŒã€è‡ªåˆ†ãŒfzf-preview.vimã‚’é–‹ç™ºã—å§‹ã‚ãŸå½“æ™‚ã¯æ©Ÿèƒ½ãŒå°‘ãªãä½¿ã„è¾›ã„éƒ¨åˆ†ã‚‚å¤šã€…ã‚ã‚Šã¾ã—ãŸã€‚(ç¾åœ¨ã¯fzf.vimã‚‚æ©Ÿèƒ½ãŒæ‹¡å¼µã•ã‚Œã€fzf-preview.vimãŒæä¾›ã—ã¦ã„ã‚‹æ©Ÿèƒ½ã®ä¸€éƒ¨ãŒé‡è¤‡ã™ã‚‹ãªã©ã—ã¦ã„ã¾ã™ã€‚)
ã¾ãŸã€fzfã‹ã‚‰æä¾›ã•ã‚Œã¦ã„ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ãŒã‹ãªã‚Šä½¿ã„ã¥ã‚‰ãã€ãƒ•ã‚¡ã‚¤ãƒ«åã«ã‚¢ã‚¤ã‚³ãƒ³ã‚’ä»˜ã‘ã‚‹ãªã©ã®å‡¦ç†ã‚’è¡Œã†ã ã‘ã§ã‚‚é»’é­”è¡“ã‚ã„ãŸã‚³ãƒ¼ãƒ‰ã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜è¿°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚

è‡ªåˆ†ã¯fzfã®å¼·åŠ›ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ã«æƒ¹ã‹ã‚Œã€æœ€åˆã¯fzf.vimã‚’ä½¿ã„ãªãŒã‚‰è‡ªåˆ†ãŒå¿…è¦ã¨ã—ã¦ã„ã‚‹æ©Ÿèƒ½ã‚’vimrcã«è¿½åŠ ã—ã¦ã„ãŸã®ã§ã™ãŒã€è¨˜è¿°é‡ãŒè†¨ã‚‰ã‚“ã§ã„ã£ãŸã®ã§ä¾¿åˆ©ãªæ©Ÿèƒ½ã‚’ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦åˆ‡ã‚Šå‡ºã—ãŸã®ãŒfzf-preview.vimã®æˆã‚Šç«‹ã¡ã§ã™ã€‚
ä»Šã¯æ¨™æº–ã§å¯¾å¿œã—ã¦ã„ã¾ã™ãŒã€Neovimã®Floating Windowã¸ã®å¯¾å¿œã‚’ã—ãŸã‹ã£ãŸãªã©ã®ç†ç”±ã‚‚ã‚ã‚Šã¾ã™ã€‚

### Vim scriptã‹ã‚‰TypeScriptã¸ã®ç§»è¡Œ

fzf-preview.vimã®å®Ÿè£…ãŒè‚¥å¤§åŒ–ã™ã‚‹ã«ã¤ã‚Œã€fzfã‹ã‚‰æä¾›ã—ã¦ã„ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’æ‰±ã†ã®ã«é™ç•ŒãŒå‡ºã¦ãã¾ã—ãŸã€‚
åŠã°ç„¡ç†ã«æ‹¡å¼µã—ã¦ã„ãŸéƒ¨åˆ†ã®è¨­è¨ˆãŒç ´ç¶»ã—ã€è‡ªåˆ†ã®Vim scriptã¸ã®çµŒé¨“ãƒ»çŸ¥è­˜ä¸è¶³ã‚‚ã‚ã‚Šã¾ã™ãŒè¨€èªæ©Ÿèƒ½çš„ã«ã‚‚è¾›ããªã£ã¦ãã¾ã—ãŸã€‚

ãã“ã§ã€è¨­è¨ˆã®è¦‹ç›´ã—ã¨TypeScriptã¸ç§»è¡Œã‚’ã—ã€ã‚¹ã‚¯ãƒ©ãƒƒãƒã§æ›¸ãç›´ã—ãŸã®ãŒç¾åœ¨ã®fzf-preview.vimã§ã™ã€‚
TypeScriptã®å¼·åŠ›ãªè¨€èªæ©Ÿèƒ½ãƒ»å„ªã‚ŒãŸé–‹ç™ºä½“é¨“ãƒ»ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã®å¼·åŠ›ã•ãªã©ã«ã‚ˆã£ã¦fzfã‚’ã‚ˆã‚ŠæŠ½è±¡çš„ã«æ‰±ã„ã€æ§˜ã€…ãªæ©Ÿèƒ½ã‚’æŸ”è»Ÿã«æä¾›å¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚
TypeScriptã§ã®å‹å®šç¾©ã‚’ä¼´ã£ãŸé–‹ç™ºä½“é¨“ã¯ã¨ã¦ã‚‚ã‚ˆãã€ã‚³ãƒ¼ãƒ‰é‡ãŒå¢—ãˆã¦ã‚‚ç ´ç¶»ã›ãšã«é–‹ç™ºã‚’ç¶šã‘ã‚‹ã“ã¨ãŒã§ãã¦ã„ã¾ã™ã€‚
npmã®è³‡ç”£ã‚’ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã®ã‚‚éå¸¸ã«å¤§ãã‹ã£ãŸã§ã™ã€‚(ãªã‚“ã¨çŠ¶æ…‹ç®¡ç†ã«Reduxã‚’ä½¿ã†ãªã©ã—ã¦ã„ã¾ã™ï¼)

:::message alert
ãŸã ã€ãã‚‚ãã‚‚å…¥å‡ºåŠ›ãŒUNIXæ€æƒ³ã«å¯„ã£ã¦ã„ã‚‹CLIã‚’ç„¡ç†çŸ¢ç†Vimã§é«˜æ©Ÿèƒ½ã«ä½¿ã†ã®ã«çµæ§‹ç„¡ç†ãŒã‚ã£ã¦ã€TypeScriptã§å®Ÿè£…ã—ãŸfzf-preview.vimã‚‚å…¥å‡ºåŠ›ã‚’æŠ½è±¡çš„ã«æ‰±ã†éš›ã«é»’é­”è¡“ã£ã½ã„ã“ã¨ã‚’ã—ã¦ã„ã¾ã™ã€‚
:::

ã¾ãŸã€åŒæ§˜ã«TypeScriptã§å®Ÿè£…ã•ã‚ŒãŸVimãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã‚ã‚‹[coc.nvim](https://github.com/neoclide/coc.nvim)ã¨é€£æºã™ã‚‹ã“ã¨ã‚‚å®¹æ˜“ã«ãªã‚Šã€LSPã«é–¢ã™ã‚‹æ©Ÿèƒ½ã®å®Ÿè£…ã¯coc.nvimã‚’çµŒç”±ã—ã¦æ‰±ã£ã¦ã„ã¾ã™ã€‚

TypeScriptã§ã®Vimãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºã«ã¤ã„ã¦ã¯åˆ¥é€”ã¾ã¨ã‚ãŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚
æƒ…å ±ãŒéå¸¸ã«å°‘ãªãã€æœ€åˆã«ã¾ã¨ã‚‚ã«å‹•ä½œã•ã›ã‚‹ã¾ã§ãŒãã‚Œãªã‚Šã«å¤§å¤‰ã§ã—ãŸã€‚

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®Ÿè£…è¦æ¨¡ã§ã™ãŒã€ã„ã¤ã®é–“ã«ã‹çµæ§‹å¢—ãˆã¦ã„ã£ã¦åˆè¨ˆç´„9000è¡Œç¨‹åº¦ã«ãªã£ã¦ã„ã¾ã™ã€‚
è¡Œæ•°ã®å¤šã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒå„ªã‚Œã¦ã„ã‚‹ã¨ã„ã†ã‚ã‘ã§ã¯ãªã„ã§ã™ãŒã€çµæ§‹é ‘å¼µã£ãŸãªãã¨æ€ã£ã¦ã„ã¾ã™ã€‚

```
===============================================================================
 Language            Files        Lines         Code     Comments       Blanks
===============================================================================
 Python                  1           57           40            4           13
 TypeScript            187         7847         6795           69          983
 Vim script             30         1007          873            2          132
===============================================================================
 Total                 218         8911         7708           75         1128
===============================================================================
```

## å‹•ä½œã«å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢

ã“ã“ã¾ã§è‰²ã€…ã¨æ›¸ã„ã¦ãã¾ã—ãŸãŒã€fzf-preview.vimã¯å‹•ä½œã•ã›ã‚‹ã®ã«ã¯Vimä»¥å¤–ã«å¿…è¦ãªã‚‚ã®ãŒã„ãã¤ã‹ã‚ã‚Šã¾ã™ã€‚
ã¨ã„ã†ã®ã‚‚TypeScriptã®å°å…¥ã‚‚å«ã‚ã€é«˜æ©Ÿèƒ½ã«ã™ã‚‹ãŸã‚å¤–éƒ¨ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã«è‰²ã€…ãªéƒ¨åˆ†ã‚’æŠ¼ã—ã¤ã‘ã‚‹å‰æã§å®Ÿè£…ã—ã¦ããŸã‹ã‚‰ã§ã™ã€‚
Vimãƒ¦ãƒ¼ã‚¶ã¯ã‚¨ãƒ‡ã‚£ã‚¿ã®æ€§è³ªçš„ã«ã‚‚ãƒŸãƒ‹ãƒãƒªã‚¹ãƒˆã®æ–¹ãŒæ¯”è¼ƒçš„å¤šãã€ã“ã“ã§å¥½ã¿ãŒçµæ§‹åˆ†ã‹ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚
å°‘ã—é¢å€’ã‹ã¨æ€ã„ã¾ã™ãŒã€èˆˆå‘³ã®ã‚ã‚‹æ–¹ã¯ã“ã®ç¯€ã‚’èª­ã‚“ã§å°å…¥ã‚’è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

ãªãŠã€Windowsã§ã®å‹•ä½œã¯[PR](https://github.com/yuki-ycino/fzf-preview.vim/pull/184)ã§å¯¾å¿œä¸­ã§ã™ã€‚

### TypeScriptãƒ©ãƒ³ã‚¿ã‚¤ãƒ 

ã¾ãšã€Nodeã¨é€šä¿¡ã™ã‚‹ã®ã§TypeScriptã‚’JS(CommonJS)ã«ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ãã®å¾Œã«(Neo)vimã‹ã‚‰CommonJSã‚’å®Ÿè¡Œã™ã‚‹(Nodeã¨RPCã‚’ä½¿ã£ã¦é€šä¿¡ã™ã‚‹)ã®ã«ã¯ä¸»ã«2ã¤ã®æ—¢å­˜å®Ÿè£…ãŒã‚ã‚Šã¾ã™ã€‚

- Neovimã®Remote Pluginæ©Ÿèƒ½ã‚’ä½¿ã†
- [neoclide/coc.nvim](https://github.com/neoclide/coc.nvim)ã®æ‹¡å¼µã¨ã—ã¦å®Ÿè£…ã™ã‚‹(ç‹¬è‡ªã§RPCã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ãŸã‚Vimã§ã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚)

:::message
è‡ªå‰ã§RPCã‚’å®Ÿè£…ã—ã¦ã‚‚ã„ã„ã®ã§ã™ãŒã€ã“ã“ã§ã¯å‰²æ„›ã—ã¾ã™ã€‚
:::

ãªã®ã§æ¨™æº–ã®Vimã®ã¿ã§ã¯å‹•ä½œã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚ä¸Šè¨˜ã®ã©ã¡ã‚‰ã‹ã‚’å°å…¥ã—ã¦ãã ã•ã„ã€‚
fzf-preview.vimã¯webpackã§ãã‚Œãã‚Œã®ç’°å¢ƒç”¨ã«ã‚¯ãƒ­ã‚¹ãƒ“ãƒ«ãƒ‰ã‚’è¡Œã„ã€ã©ã¡ã‚‰ã§ã‚‚å‹•ä½œã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚
ãã‚Œãã‚Œã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚

#### Remote Plugin

```
npm install -g neovim
```

##### vim-plug

```vim
Plug 'junegunn/fzf', { 'do': { -> fzf#install() } }
Plug 'yuki-ycino/fzf-preview.vim', { 'branch': 'release', 'do': ':UpdateRemotePlugins' }
```

##### dein.vim

```vim
call dein#add('junegunn/fzf', { 'build': './install --all', 'merged': 0 })
call dein#add('yuki-ycino/fzf-preview.vim', { 'rev': 'release' })
```

#### coc extensions

```vim
:CocInstall coc-fzf-preview
```

### å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰ã¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³

å­˜åœ¨ã™ã‚‹ã®ãŒå‰æã«ãªã£ã¦ã„ã‚‹ã‚³ãƒãƒ³ãƒ‰åŠã³Vimãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã„ãã¤ã‹ã‚ã‚‹ã®ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
(ãŠãã‚‰ãè¨­å®šæ¬¡ç¬¬ã§ä¸è¦ã«ãªã‚Šã¾ã™ãŒã€ã“ã‚Œã‚‰ã‚’å°å…¥ã—ãŸæ–¹ãŒæ¥½ã§ã™ã€‚)

#### Requirement

- Node <https://nodejs.org/>
- fzf <https://github.com/junegunn/fzf>
- Python3 <https://www.python.org/>
- ripgrep <https://github.com/BurntSushi/ripgrep>

#### Optional

- bat <https://github.com/sharkdp/bat>
- gina.vim <https://github.com/lambdalisue/gina.vim>

ã“ã®ã‚ãŸã‚Šã‚’å°å…¥ã—ã¦ãŠãã¨ã‹ãªã‚Šå¿«é©ã«ä½¿ãˆã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚
ä»–ã®ä¾å­˜é–¢ä¿‚ã«ã¤ã„ã¦ã¯[README](https://github.com/yuki-ycino/fzf-preview.vim/blob/master/README.md)ã‚„[doc](https://github.com/yuki-ycino/fzf-preview.vim/blob/master/doc/fzf_preview_vim.txt)ã«æ›¸ã„ã¦ã‚ã‚‹ã®ã§ãã¡ã‚‰ã‚’å‚ç…§ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

## ã¾ã¨ã‚

- ä¸­ç´šVimmerãŒTypeScriptã§Vimã®ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’é–‹ç™ºã—ã¦ã¿ãŸ
  - TypeScriptã®é–‹ç™ºä½“é¨“ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«é™ã‚‰ãšã¨ã¦ã‚‚ã‚ˆã„ã€æ¡ç”¨ã§ãã‚‹ç’°å¢ƒã§ã‚ã‚Œã°ä»Šå¾Œã‚‚ç©æ¥µçš„ã«æ¤œè¨ã—ã¦ã„ããŸã„
- ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã¯é–‹ç™ºã‚’åŠ¹ç‡åŒ–ã™ã‚‹ä¸Šã§ã¨ã¦ã‚‚æœ‰ç”¨ãªã®ã§æ˜¯éå°å…¥ã™ã‚‹ã¹ã
- ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ with ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯æ›´ã«é–‹ç™ºåŠ¹ç‡ãŒä¸ŠãŒã‚‹ã€è»½å¿«ãªãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ãŒæ­è¼‰ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ãŒãŠã™ã™ã‚
- å¿…è¦ãªã‚‚ã®ãŒå¤šã„ã‘ã©ã€ä½¿ãˆã‚‹ç’°å¢ƒã§ã‚ã‚Œã°æ‹™ä½œã®[fzf-preview.vim](https://github.com/yuki-ycino/fzf-preview.vim)ã¯å€‹äººçš„ã«ã¨ã¦ã‚‚ãŠã™ã™ã‚

ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã¯ä½•æ•…ã‹Vimã§éå¸¸ã«é¸æŠè‚¢ãŒå¤šãã€é¸æŠãŒé›£ã—ã„ã®ã§ã™ãŒå°å…¥ã™ã‚‹ä¾¡å€¤ã¯ååˆ†ã«ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚
ã©ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å°å…¥ã™ã‚‹ã¨ã—ã¦ã‚‚ã€ã“ã®è¨˜äº‹ã«æ›¸ã„ãŸå†…å®¹ãŒå°‘ã—ã§ã‚‚é¸å®šã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚
ã¾ãŸã€ä»–ã®ã‚¨ãƒ‡ã‚£ã‚¿ã‚„IDEã‚’ä½¿ã£ã¦ã„ã‚‹æ–¹ã«ã‚‚ã€ã“ã®è¨˜äº‹ãŒãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã®é¸å®šãƒ»ä½¿ã„æ–¹ãªã©ã®å‚è€ƒã«ãªã‚Œã°ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚

Vimã¨ã¯é–¢ä¿‚ãªã„ã§ã™ãŒã€IntelliJç³»ã®grepæ©Ÿèƒ½ãªã©ã¯ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã®ã‚ˆã†ãªå‹•ä½œã§éå¸¸ã«å¼·åŠ›ã ã¨èãã¾ã—ãŸã€‚
æœ€è¿‘ã¯JetBrainsã®è£½å“ã‚’è§¦ã£ã¦ã„ãªã‹ã£ãŸã®ã§ã™ãŒã€è‡ªåˆ†ãŒå®Ÿè£…ã™ã‚‹æ©Ÿèƒ½ã®å‚è€ƒã«ã™ã‚‹ãŸã‚ã«ã‚‚ã€æ©Ÿä¼šãŒã‚ã‚Œã°ã¾ãŸè§¦ã£ã¦ã¿ãŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚

æœ€å¾Œã«ãªã‚Šã¾ã™ãŒã€è‡ªåˆ†ã¯ä»Šå¾Œã‚‚fzf-preview.vimã®é–‹ç™ºã‚’ç¶šã‘ã¦ã„ããŸã„ã¨è€ƒãˆã¦ã„ã‚‹ã®ã§ã€æ°—ã«ãªã£ãŸæ–¹ã¯è©¦ã—ã«è§¦ã£ã¦é ‚ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚

## ãŠã¾ã‘

è‡ªåˆ†ã®fzf-preview.vimã®è¨­å®šã§ã™ã€‚
ç´°ã‹ã‚ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã„ã‚‹ã®ã§å†—é•·ã«ãªã£ã¦ã„ã¾ã™ãŒã€åŸºæœ¬çš„ã«ã¯ã‚ã¾ã‚Šè¨­å®šã—ãªãã¦ã‚‚å‹•ä½œã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

:::details fzf-preview settings

```vim
let g:fzf_preview_git_files_command   = 'git ls-files --exclude-standard | while read line; do if [[ ! -L $line ]] && [[ -f $line ]]; then echo $line; fi; done'
let g:fzf_preview_grep_cmd            = 'rg --line-number --no-heading --color=never --sort=path'
let g:fzf_preview_mru_limit           = 500
let g:fzf_preview_use_dev_icons       = 1
let g:fzf_preview_default_fzf_options = {
\ '--reverse': v:true,
\ '--preview-window': 'wrap',
\ '--exact': v:true,
\ '--no-sort': v:true,
\ }
let $FZF_PREVIEW_PREVIEW_BAT_THEME  = 'gruvbox'

noremap <fzf-p> <Nop>
map     ;       <fzf-p>
noremap ;;      ;
noremap <dev>   <Nop>
map     m       <dev>

nnoremap <silent> <fzf-p>r     :<C-u>CocCommand fzf-preview.FromResources buffer project_mru<CR>
nnoremap <silent> <fzf-p>w     :<C-u>CocCommand fzf-preview.ProjectMrwFiles<CR>
nnoremap <silent> <fzf-p>a     :<C-u>CocCommand fzf-preview.FromResources project_mru git<CR>
nnoremap <silent> <fzf-p>g     :<C-u>CocCommand fzf-preview.GitActions<CR>
nnoremap <silent> <fzf-p>s     :<C-u>CocCommand fzf-preview.GitStatus<CR>
nnoremap <silent> <fzf-p>b     :<C-u>CocCommand fzf-preview.Buffers<CR>
nnoremap <silent> <fzf-p>B     :<C-u>CocCommand fzf-preview.AllBuffers<CR>
nnoremap <silent> <fzf-p><C-o> :<C-u>CocCommand fzf-preview.Jumps<CR>
nnoremap <silent> <fzf-p>/     :<C-u>CocCommand fzf-preview.Lines --resume --add-fzf-arg=--no-sort<CR>
nnoremap <silent> <fzf-p>*     :<C-u>CocCommand fzf-preview.Lines --add-fzf-arg=--no-sort --add-fzf-arg=--query="<C-r>=expand('<cword>')<CR>"<CR>
xnoremap <silent> <fzf-p>*     "sy:CocCommand fzf-preview.Lines --add-fzf-arg=--no-sort --add-fzf-arg=--query="<C-r>=substitute(@s, '\(^\\v\)\\|\\\(<\\|>\)', '', 'g')<CR>"<CR>
nnoremap <silent> <fzf-p>n     :<C-u>CocCommand fzf-preview.Lines --add-fzf-arg=--no-sort --add-fzf-arg=--query="<C-r>=substitute(@/, '\(^\\v\)\\|\\\(<\\|>\)', '', 'g')<CR>"<CR>
nnoremap <silent> <fzf-p>?     :<C-u>CocCommand fzf-preview.BufferLines --resume --add-fzf-arg=--no-sort<CR>
nnoremap          <fzf-p>f     :<C-u>CocCommand fzf-preview.ProjectGrep<Space>
xnoremap          <fzf-p>f     "sy:CocCommand fzf-preview.ProjectGrep<Space>-F<Space>"<C-r>=substitute(substitute(@s, '\n', '', 'g'), '/', '\\/', 'g')<CR>"
nnoremap <silent> <fzf-p>q     :<C-u>CocCommand fzf-preview.QuickFix<CR>
nnoremap <silent> <fzf-p>l     :<C-u>CocCommand fzf-preview.LocationList<CR>
nnoremap <silent> <fzf-p>:     :<C-u>CocCommand fzf-preview.CommandPalette<CR>
nnoremap <silent> <fzf-p>p     :<C-u>CocCommand fzf-preview.Yankround<CR>
nnoremap <silent> <fzf-p>m     :<C-u>CocCommand fzf-preview.Bookmarks --resume<CR>
nnoremap <silent> <fzf-p><C-]> :<C-u>CocCommand fzf-preview.VistaCtags --add-fzf-arg=--query="<C-r>=expand('<cword>')<CR>"<CR>
nnoremap <silent> <fzf-p>o     :<C-u>CocCommand fzf-preview.VistaBufferCtags<CR>

nnoremap <silent> <dev>q  :<C-u>CocCommand fzf-preview.CocCurrentDiagnostics<CR>
nnoremap <silent> <dev>Q  :<C-u>CocCommand fzf-preview.CocDiagnostics<CR>
nnoremap <silent> <dev>rf :<C-u>CocCommand fzf-preview.CocReferences<CR>
nnoremap <silent> <dev>t  :<C-u>CocCommand fzf-preview.CocTypeDefinitions<CR>

AutoCmd User fzf_preview#initialized call s:fzf_preview_settings()

function! s:buffers_delete_from_lines(lines) abort
  for line in a:lines
    let matches = matchlist(line, '\[\(\d\+\)\]')
    if len(matches) >= 1
      execute 'Bdelete! ' . matches[1]
    endif
  endfor
endfunction

function! s:fzf_preview_settings() abort
  let g:fzf_preview_grep_preview_cmd = 'COLORTERM=truecolor ' . g:fzf_preview_grep_preview_cmd
  let g:fzf_preview_command = 'COLORTERM=truecolor ' . g:fzf_preview_command

  let g:fzf_preview_custom_processes['open-file'] = fzf_preview#remote#process#get_default_processes('open-file', 'coc')
  let g:fzf_preview_custom_processes['open-file']['ctrl-s'] = g:fzf_preview_custom_processes['open-file']['ctrl-x']
  call remove(g:fzf_preview_custom_processes['open-file'], 'ctrl-x')

  let g:fzf_preview_custom_processes['open-buffer'] = fzf_preview#remote#process#get_default_processes('open-buffer', 'coc')
  let g:fzf_preview_custom_processes['open-buffer']['ctrl-s'] = g:fzf_preview_custom_processes['open-buffer']['ctrl-x']
  call remove(g:fzf_preview_custom_processes['open-buffer'], 'ctrl-q')
  let g:fzf_preview_custom_processes['open-buffer']['ctrl-x'] = get(function('s:buffers_delete_from_lines'), 'name')

  let g:fzf_preview_custom_processes['open-bufnr'] = fzf_preview#remote#process#get_default_processes('open-bufnr', 'coc')
  let g:fzf_preview_custom_processes['open-bufnr']['ctrl-s'] = g:fzf_preview_custom_processes['open-bufnr']['ctrl-x']
  call remove(g:fzf_preview_custom_processes['open-bufnr'], 'ctrl-q')
  let g:fzf_preview_custom_processes['open-bufnr']['ctrl-x'] = get(function('s:buffers_delete_from_lines'), 'name')

  let g:fzf_preview_custom_processes['git-status'] = fzf_preview#remote#process#get_default_processes('git-status', 'coc')
  let g:fzf_preview_custom_processes['git-status']['ctrl-s'] = g:fzf_preview_custom_processes['git-status']['ctrl-x']
  call remove(g:fzf_preview_custom_processes['git-status'], 'ctrl-x')
endfunction
```

:::
